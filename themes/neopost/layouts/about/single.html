{{ define "main" }}
<div id="content">
    <aside id="sidebar">
        <div id="avatar">
            {{ with .Site.GetPage "section" "/sidebar/_index.md" }}
            <img class="flower" src="{{ index .Params "icon-path" }}">
            {{ end }}
        </div>
        
        <div id="bio">
        {{ with .Site.GetPage "section" "/sidebar/bio.md" }}
            {{ .Content | safeHTML }}
        {{ end }}
        </div>
        
        <div class="small-box">
            {{ with .Site.GetPage "section" "/sidebar/basic-info.md" }}
                {{ .Content | safeHTML }}
            {{ end }}
        </div>

        <nav class="links">
            <ul>
            {{ with .Site.GetPage "section" "/sidebar/_index.md" }}
            {{ range .Params.links }}
                <li><a href="{{ .link }}">{{ .name }}</a></li>
            {{ end }}
            {{ end }}
            </ul>
        </nav>
    </aside>
    
    <main>
        <!-- Header matching other pages -->
        <article id="top" class="clearfix">
            <section>
                <div style="text-align: center; padding: 2em 1em;">
                    <h1>{{ .Title }}</h1>
                </div>
            </section>
        </article>

        <!-- About content -->
        <article>
            <div class="about-content">
                {{ .Content }}
            </div>
        </article>
    </main>
    
    <aside id="right-sidebar">
        <div class="status-box">
            {{ with .Site.GetPage "section" "/sidebar/currently.md" }}
            <h3>Currently</h3>
            <ul class="status-list">
                <li>ðŸ“– reading: <span>{{ .Params.reading }}</span></li>
                <li>ðŸŽµ listening: <span>{{ .Params.listening }}</span></li>
                <li>ðŸŽ® playing: <span>{{ .Params.playing }}</span></li>
                <li>ðŸ’­ mood: <span>{{ .Params.mood }}</span></li>
            </ul>
            {{ end }}
        </div>

        <div class="pixel-pet">
            <img src="/mew.gif" alt="pixel pet" id="pet">
            <p class="pet-status">Mew is vibing!</p>
        </div>

        <div class="quote-box">
            <h3>ðŸ’­ Random Thought</h3>
            <p id="random-quote"></p>
            <button onclick="newQuote()">âœ¨ New Quote</button>
        </div>
    </aside>
</div>

<script>
(function() {
    const quotesJSON = '{{ with .Site.GetPage "section" "/sidebar/quotes.md" }}{{ .Params.quotes | jsonify }}{{ end }}';
    const quotes = JSON.parse(quotesJSON);
    
    window.newQuote = function() {
        const randomIndex = Math.floor(Math.random() * quotes.length);
        const quote = quotes[randomIndex];
        document.getElementById('random-quote').textContent = quote;
    }
    
    window.addEventListener('DOMContentLoaded', newQuote);
})();
</script>
{{ end }}
